<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paddle Checkout Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        button {
            background-color: #0070f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background-color: #0051a2;
        }
        pre {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            overflow: auto;
            margin: 10px 0;
        }
        .logs {
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>Paddle Checkout Direct Test</h1>
    <p>This is a simple test page to verify if Paddle checkout can be opened directly using the Paddle.js API without React.</p>

    <hr>
    
    <div>
        <h2>Test Configuration</h2>
        <p>Email for testing: <input type="email" id="testEmail" value="" placeholder="Enter test email here"></p>
        <p>Price ID: <input type="text" id="priceId" value="pri_01jtdj3q5xd7v2gvj87yfz57ym"></p>
    </div>
    
    <div>
        <h2>Test Actions</h2>
        <button id="initButton">Initialize Paddle</button>
        <button id="checkoutButton" disabled>Open Checkout</button>
    </div>
    
    <div>
        <h2>Logs</h2>
        <pre class="logs" id="logs"></pre>
    </div>

    <!-- Load Paddle.js -->
    <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
    
    <script>
        // Logging function
        function log(message) {
            const logsElement = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString();
            logsElement.innerHTML += `[${timestamp}] ${message}\n`;
            console.log(`[${timestamp}] ${message}`);
            logsElement.scrollTop = logsElement.scrollHeight;
        }

        // Initialize Paddle
        document.getElementById('initButton').addEventListener('click', async function() {
            try {
                log('Initializing Paddle...');
                
                // Get the client token from URL parameter if available, otherwise use test token
                const urlParams = new URLSearchParams(window.location.search);
                const token = urlParams.get('token') || 'test_4ae19...'; // Replace with your token
                
                log(`Using token: ${token.substring(0, 8)}...`);
                
                // Initialize Paddle
                Paddle.Environment.set('sandbox');
                Paddle.Initialize({
                    token: token,
                    eventCallback: function(event) {
                        log(`Paddle event: ${event.name}`);
                    }
                });
                
                log('Paddle initialized successfully');
                log(`Environment: ${Paddle.Environment.get()}`);
                
                // Enable the checkout button
                document.getElementById('checkoutButton').disabled = false;
            } catch (error) {
                log(`Error: ${error.message}`);
            }
        });

        // Open checkout
        document.getElementById('checkoutButton').addEventListener('click', async function() {
            try {
                const emailElement = document.getElementById('testEmail');
                const email = emailElement.value.trim();
                
                if (!email) {
                    log('Please enter a test email first');
                    return;
                }
                
                const priceId = document.getElementById('priceId').value.trim();
                
                log(`Opening checkout for email: ${email}`);
                log(`Using price ID: ${priceId}`);
                log(`Current domain: ${window.location.host}`);
                
                // Configure checkout options
                const checkoutOptions = {
                    items: [{
                        priceId: priceId,
                        quantity: 1
                    }],
                    customer: {
                        email: email
                    },
                    settings: {
                        displayMode: 'overlay',
                        theme: 'light',
                        locale: 'en'
                    },
                    successCallback: function() {
                        log('Checkout completed successfully');
                    },
                    closeCallback: function() {
                        log('Checkout closed by user');
                    }
                };
                
                log('Opening checkout...');
                Paddle.Checkout.open(checkoutOptions);
                log('Checkout opened');
            } catch (error) {
                log(`Error: ${error.message}`);
            }
        });

        // Log page load
        window.addEventListener('load', function() {
            log('Page loaded');
            log(`Current domain: ${window.location.host}`);
            log(`Current URL: ${window.location.href}`);
            log('Click "Initialize Paddle" to begin');
        });
    </script>
</body>
</html> 